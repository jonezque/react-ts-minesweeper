(this["webpackJsonpminesweeper-rt"]=this["webpackJsonpminesweeper-rt"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r=n(1),u=n(0),c=n.n(u),i=n(8),l=n.n(i),o=(n(14),n(6)),a=n(2),f=function(e){for(var t=e.value;t.length<3;)t="0"+t;return Object(r.jsx)("span",{style:{background:"black",color:"red",padding:"2px 5px"},children:t})},s=20,d=function(e){var t=e.mineCount,n=e.time,u=e.columns,c=e.reset;return Object(r.jsxs)("div",{style:{padding:"5px",minWidth:16*u+"px",display:"flex",justifyContent:"space-between"},children:[Object(r.jsx)(f,{value:t+""}),Object(r.jsx)("button",{className:"smile-button",onClick:c}),Object(r.jsx)(f,{value:n+""})]})},v=n(5),b=function(e){var t=e.columns,n=e.rows,c=e.startGame,i=e.mines,l=e.numbers,o=e.openFields,f=e.markCell,d=e.marked,b=e.revealMines,j=Object(u.useRef)(null),x=Object(u.useState)(-1),y=Object(a.a)(x,2),O=y[0],h=y[1],m=Object(u.useState)(-1),p=Object(a.a)(m,2),g=p[0],k=p[1];return Object(u.useEffect)((function(){var e=j.current,r=e.getContext("2d");e.height=n*s,e.width=t*s,r.textBaseline="middle",r.textAlign="center",r.font="16px Arial",r.fillStyle="grey",function(e,t,n){n.beginPath(),n.clearRect(0,0,e*s,t*s),n.strokeStyle="darkgrey";for(var r=0;r<e;++r)for(var u=0;u<t;++u)n.moveTo(r*s,u*s),n.lineTo(r*s+s,u*s),n.lineTo(r*s+s,u*s+s),n.lineTo(r*s,u*s+s),n.lineTo(r*s,u*s);n.stroke(),n.closePath()}(t,n,r),-1!==O&&-1!==g&&function(e,t,n){n.beginPath(),n.strokeStyle="black",n.moveTo(e*s,t*s),n.lineTo(e*s+s,t*s),n.lineTo(e*s+s,t*s+s),n.lineTo(e*s,t*s+s),n.lineTo(e*s,t*s),n.stroke(),n.closePath()}(O,g,r);var u,c=Object(v.a)(o);try{var a=function(){var e=u.value,t=e.x,n=e.y;if(i.find((function(e){return e.x===t&&e.y===n})))return"continue";var c=l.find((function(e){return e.x===t&&e.y===n}));if(!c)return{v:void 0};r.fillStyle="grey",0!==c.value?r.fillText(c.value+"",t*s+10,n*s+10):r.fillRect(t*s,n*s,s,s)};for(c.s();!(u=c.n()).done;){var f=a();if("continue"!==f&&"object"===typeof f)return f.v}}catch(I){c.e(I)}finally{c.f()}var x,y=Object(v.a)(d);try{for(y.s();!(x=y.n()).done;){var h=x.value,m=h.x,p=h.y;r.fillText("!",m*s+10,p*s+10)}}catch(I){y.e(I)}finally{y.f()}if(b){r.fillStyle="red";var k,S=Object(v.a)(i);try{for(S.s();!(k=S.n()).done;){var C=k.value,E=C.x,T=C.y;r.fillRect(E*s,T*s,s,s)}}catch(I){S.e(I)}finally{S.f()}r.fillStyle="grey";var w,N=Object(v.a)(d);try{for(N.s();!(w=N.n()).done;){var L=w.value,M=L.x,R=L.y;r.fillText("!",M*s+10,R*s+10)}}catch(I){N.e(I)}finally{N.f()}}}),[O,g,i,t,n,o,l,d,b]),Object(u.useEffect)((function(){var e=j.current,t=function(e){b||c(O,g)};e.addEventListener("click",t);var n=function(e){e.preventDefault(),b||f(O,g)};return e.addEventListener("contextmenu",n),function(){e.removeEventListener("click",t),e.removeEventListener("contextmenu",n)}}),[O,g,c,b,f]),Object(u.useEffect)((function(){var e=j.current,t=function(e){b||(h(Math.floor(e.offsetX/16)),k(Math.floor(e.offsetY/16)))};e.addEventListener("mousemove",t);var n=function(){b||(h(-1),k(-1))};return e.addEventListener("mouseleave",n),function(){e.removeEventListener("mousemove",t),e.removeEventListener("mouseleave",n)}}),[t,b,n]),Object(r.jsx)("div",{style:{padding:"5px"},children:Object(r.jsx)("div",{style:{width:16*t+"px",height:16*n+"px"},children:Object(r.jsx)("canvas",{ref:j,style:{width:"100%",height:"100%"}})})})},j=function e(t,n,r,u,c,i){var l=[];0===n||0===r||i.find((function(e){return e.x===n-1&&e.y===r-1}))||l.push({x:n-1,y:r-1}),0===r||i.find((function(e){return e.x===n&&e.y===r-1}))||l.push({x:n,y:r-1}),n===c-1||0===r||i.find((function(e){return e.x===n+1&&e.y===r-1}))||l.push({x:n+1,y:r-1}),0===n||i.find((function(e){return e.x===n-1&&e.y===r}))||l.push({x:n-1,y:r}),n===c-1||i.find((function(e){return e.x===n+1&&e.y===r}))||l.push({x:n+1,y:r}),0===n||r===u-1||i.find((function(e){return e.x===n-1&&e.y===r+1}))||l.push({x:n-1,y:r+1}),r===u-1||i.find((function(e){return e.x===n&&e.y===r+1}))||l.push({x:n,y:r+1}),n===c-1||r===u-1||i.find((function(e){return e.x===n+1&&e.y===r+1}))||l.push({x:n+1,y:r+1}),i.push.apply(i,l);for(var o=function(){var n=f[a],r=t.find((function(e){return e.x===n.x&&e.y===n.y}));0===(null===r||void 0===r?void 0:r.value)&&e(t,n.x,n.y,u,c,i)},a=0,f=l;a<f.length;a++)o()},x=function(){var e=Object(u.useRef)(null),t=Object(u.useRef)(null),n=Object(u.useRef)(null),c=Object(u.useRef)(-1),i=Object(u.useState)(10),l=Object(a.a)(i,2),f=l[0],s=l[1],v=Object(u.useState)([]),x=Object(a.a)(v,2),y=x[0],O=x[1],h=Object(u.useState)(0),m=Object(a.a)(h,2),p=m[0],g=m[1],k=Object(u.useState)(10),S=Object(a.a)(k,2),C=S[0],E=S[1],T=Object(u.useState)(10),w=Object(a.a)(T,2),N=w[0],L=w[1],M=Object(u.useState)([]),R=Object(a.a)(M,2),I=R[0],F=R[1],P=Object(u.useState)([]),A=Object(a.a)(P,2),B=A[0],D=A[1],G=Object(u.useState)([]),J=Object(a.a)(G,2),z=J[0],W=J[1],X=Object(u.useState)(!1),Y=Object(a.a)(X,2),q=Y[0],H=Y[1],K=Object(u.useState)(!1),Q=Object(a.a)(K,2),U=Q[0],V=Q[1],Z=Object(u.useCallback)((function(){clearInterval(c.current),g(0),O([]),D([]),W([]),F([]),V(!1)}),[]);Object(u.useEffect)((function(){e.current&&t.current&&n.current&&(e.current.value="10",t.current.value="10",n.current.value="10")}),[]);var $=Object(u.useCallback)((function(e,t){if(!I.length){for(var n=e+t*N,r=new Set([n]);r.size!==f+1;)r.add(Math.floor(Math.random()*C*N));r.delete(n),F(Array.from(r).map((function(e){return{x:e%N,y:Math.floor(e/N)}}))),g((function(e){return 1})),c.current=setInterval((function(){g((function(e){return e+1}))}),1e3)}y.find((function(n){return n.x===e&&n.y===t}))||(z.find((function(n){return n.x===e&&n.y===t}))||(W((function(n){return[].concat(Object(o.a)(n),[{x:e,y:t}])})),H(!0)))}),[I,f,C,N,z,y]),_=Object(u.useCallback)((function(e,t){if(!z.find((function(n){return n.x===e&&n.y===t}))){var n=y.findIndex((function(n){return n.x===e&&n.y===t}));-1!==n?O((function(e){return e.filter((function(e,t){return t!==n}))})):y.length!==f&&O((function(n){return[].concat(Object(o.a)(n),[{x:e,y:t}])}))}}),[f,y,z]);return Object(u.useEffect)((function(){for(var e=[],t=function(t){for(var n=function(n){if(I.find((function(e){return e.x===t&&e.y===n})))return"continue";var r=0;0!==n&&0!==t&&(I.find((function(e){return e.x===t-1&&e.y===n-1}))&&r++);0!==n&&(I.find((function(e){return e.x===t&&e.y===n-1}))&&r++);0!==n&&t!==N-1&&(I.find((function(e){return e.x===t+1&&e.y===n-1}))&&r++);0!==t&&(I.find((function(e){return e.x===t-1&&e.y===n}))&&r++);t!==N-1&&(I.find((function(e){return e.x===t+1&&e.y===n}))&&r++);0!==t&&n!==C-1&&(I.find((function(e){return e.x===t-1&&e.y===n+1}))&&r++);n!==C-1&&(I.find((function(e){return e.x===t&&e.y===n+1}))&&r++);t!==N-1&&n!==C-1&&(I.find((function(e){return e.x===t+1&&e.y===n+1}))&&r++);e.push({x:t,y:n,value:r})},r=0;r<C;++r)n(r)},n=0;n<N;++n)t(n);D(e)}),[N,I,C]),Object(u.useEffect)((function(){if(z.length&&q){H(!1);var e=z[z.length-1],t=e.x,n=e.y;if(I.find((function(e){return e.x===t&&e.y===n})))return alert("you lost"),void V(!0);var r=B.find((function(e){return e.x===t&&e.y===n}));if(r&&0===r.value){var u=Object(o.a)(z);j(B,t,n,C,N,u),W(u)}}}),[z,B,I,C,N,q]),Object(u.useEffect)((function(){z.length+f===C*N&&(alert("win"),clearInterval(c.current))}),[z,f,C,N]),Object(r.jsxs)("div",{style:{background:"#eeeeee",display:"inline-flex",flexDirection:"column"},children:[Object(r.jsx)(d,{mineCount:f-y.length,time:p,columns:N,reset:Z}),Object(r.jsx)(b,{rows:C,columns:N,startGame:$,mines:I,numbers:B,openFields:z,marked:y,markCell:_,revealMines:U}),Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"100px 50px"},children:[Object(r.jsxs)("label",{style:{display:"contents"},children:["mine count:",Object(r.jsx)("input",{ref:n})]}),Object(r.jsxs)("label",{style:{display:"contents"},children:["rows:",Object(r.jsx)("input",{ref:e})]}),Object(r.jsxs)("label",{style:{display:"contents"},children:["columns:",Object(r.jsx)("input",{ref:t})]}),Object(r.jsx)("button",{style:{gridColumn:"1 / span 2"},onClick:function(){var r,u,c;Z();var i=Number(null===(r=e.current)||void 0===r?void 0:r.value),l=Number(null===(u=t.current)||void 0===u?void 0:u.value),o=Number(null===(c=n.current)||void 0===c?void 0:c.value);Number.isNaN(i)||Number.isNaN(l)||Number.isNaN(o)||i*l<o?alert("bad values"):(s(o),E(i),L(l))},children:"update"})]})})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,16)).then((function(t){var n=t.getCLS,r=t.getFID,u=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),u(e),c(e),i(e)}))};l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root")),y(console.log)}},[[15,1,2]]]);
//# sourceMappingURL=main.8e470f48.chunk.js.map